<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
<br>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function timer() {
        setInterval(function(){ ajaxcall() }, 10000);
    }
    function ajaxcall() {
        $.ajax({
            url: "http://127.0.0.1:5000/submit",
            type: "POST",
            data: "content=1&author=1"
        });        
    }
</script>
<center>
    <button onclick="timer()">Start</button>
    <a href="{{node_address}}/mine" target="_blank"><button>Request to mine</button></a>
    <a href="/"><button>Resync</button></a>
</center>

<br>



<table width="100%" border="0">

    <tr>
        <th>Block ID</th>
        <th>Leakage Location</th>

        <th>Leakage Severity</th>
        <th>Timestamp</th>

    </tr>
    {% for post in posts %}



    <tr>
        <td style="text-align:center" class="test"></td>
        <td style="text-align:center">{{post.content}}</td>

        <td style="text-align:center">{{post.author}}</td>
        <td style="text-align:center">{{post.timestamp}}</td>

    </tr>



    {% endfor %}
</table>

<style>
    .post_box {
        background: #fff;
        padding: 12px 0px 0px 12px;
        margin-top: 0px;
        margin-bottom: 8px;
        border-top: 1px solid #f0f0f0;
    }

    body {
        /* Set "my-sec-counter" to 0 */
        counter-reset: my-sec-counter;
        background-image: url("https://d27p8o2qkwv41j.cloudfront.net/wp-content/uploads/2016/03/dreamstime_m_48008311-e1458641725575.jpg");
        background-repeat: no-repeat;
        background-size: cover;
    }

    .test::before {
        /* Increment "my-sec-counter" by 1 */
        counter-increment: my-sec-counter;
        content: "Block " counter(my-sec-counter) ". ";

    }

    .post_box-header {
        padding-bottom: 12px;
    }

    .post_box-avatar {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 22px;
        float: left;
        margin-right: 16px;
        border: 1px solid #fff;
        box-shadow: 0px 0px 0px 2px #f00;
    }

        .post_box-avatar::after {
            content: "";
            display: block;
        }

    .post_box-name {
        font-weight: bold;
    }

    .post_box-subtitle {
        color: #777;
    }

    .post_box-body {
        margin-top: 16px;
        margin-bottom: 8px;
    }

    .post_box-options {
        float: right;
    }

    .option-btn {
        background: #f8f8f8;
        border: none;
        color: #2c3e50;
        padding: 7px;
        cursor: pointer;
        font-size: 14px;
        margin-left: 2px;
        margin-right: 2px;
        outline: none;
        height: 42px;
    }
    
</style>
{% endblock %}
